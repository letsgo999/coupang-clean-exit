<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì¿ íŒ¡ ì™„ì „ íƒˆí‡´ ê°€ì´ë“œ (Final Fix)</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans KR', sans-serif; overflow-x: hidden; }
    
    /* ì´ë¯¸ì§€ í¬ë¡­ ì»¨í…Œì´ë„ˆ */
    .crop-container { 
      width: 100%; 
      height: 350px; 
      overflow: hidden; 
      position: relative; 
      border-radius: 0.75rem; 
      border: 1px solid #e5e7eb; 
      background: #f3f4f6; 
    }
    
    /* ê¸´ ìŠ¤í¬ë¦°ìƒ· ì´ë¯¸ì§€ ì²˜ë¦¬ */
    .crop-image { 
      width: 100%; 
      object-fit: cover; 
      transition: object-position 0.5s ease-in-out; 
    }
    
    /* ë‹¨ê³„ë³„ ì´ë¯¸ì§€ ìœ„ì¹˜ ì¡°ì • (CSS) */
    .crop-step-0 { object-position: 0% 0%; }
    .crop-step-1 { object-position: 0% 20%; }
    .crop-step-2 { object-position: 0% 45%; }
    .crop-step-3 { object-position: 0% 70%; }
    .crop-step-4 { object-position: 0% 100%; }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">

<div id="root"></div>

<script type="text/babel">
  const { useState, useEffect } = React;

  /* ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ ëª¨ìŒ */
  const Icons = {
    Shield: () => <svg className="w-12 h-12 text-red-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>,
    Monitor: ({ isActive }) => <svg className={`w-5 h-5 mr-2 ${isActive ? 'text-white' : 'text-gray-600'}`} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>,
    Mobile: ({ isActive }) => <svg className={`w-5 h-5 mr-2 ${isActive ? 'text-white' : 'text-gray-600'}`} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>,
    RightArrow: () => <svg className="w-5 h-5 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5l7 7-7 7"></path></svg>,
    Triangle: () => <svg className="w-4 h-4 text-gray-400 mx-1" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" /></svg>
  };

  /* ë°ì´í„° ì„¤ì • */
  const guideData = [
    {
      id: 1,
      title: "1. ë‚¨ì€ ì£¼ë¬¸/ë°˜í’ˆ í™•ì¸",
      desc: "ì§„í–‰ ì¤‘ì¸ ì£¼ë¬¸ì´ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ íƒˆí‡´ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. 'ë§ˆì´ì¿ íŒ¡'ì—ì„œ ëª¨ë“  ì£¼ë¬¸ì´ êµ¬ë§¤í™•ì • ë˜ëŠ” í™˜ë¶ˆì™„ë£Œ ìƒíƒœì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.",
      cropClass: "crop-step-0", 
      actionLabel: "ì£¼ë¬¸ ë‚´ì—­ ì •ë¦¬ ì™„ë£Œ"
    },
    {
      id: 2,
      title: "2. ì™€ìš° ë©¤ë²„ì‹­ í•´ì§€",
      desc: "ë©¤ë²„ì‹­ ì´ìš© ì¤‘ì—ëŠ” íƒˆí‡´ ë²„íŠ¼ì´ ëˆŒë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤. 'ë§ˆì´ì¿ íŒ¡ > ì™€ìš° ë©¤ë²„ì‹­'ì—ì„œ í•´ì§€í•˜ì„¸ìš”. ë°©ì–´ ë¬¸êµ¬ê°€ ë‚˜ì™€ë„ ëê¹Œì§€ 'í•´ì§€'ë¥¼ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.",
      cropClass: "crop-step-1", 
      actionLabel: "ë©¤ë²„ì‹­ í•´ì§€ ì™„ë£Œ"
    },
    {
      id: 3,
      title: "3. ì¿ í˜ì´ & ê²°ì œìˆ˜ë‹¨ ì‚­ì œ",
      desc: "ì¿ í˜ì´ ì”ì•¡ì„ 0ì›ìœ¼ë¡œ ë§Œë“¤ê³ , ë“±ë¡ëœ ì¹´ë“œ/ê³„ì¢Œ ì •ë³´ë¥¼ ëª¨ë‘ ì‚­ì œí•´ì£¼ì„¸ìš”. ê°œì¸ì •ë³´ë¥¼ ê¹”ë”í•˜ê²Œ ì§€ìš°ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.",
      cropClass: "crop-step-2", 
      actionLabel: "ëˆ/ì¹´ë“œ ì •ë³´ ì‚­ì œ ì™„ë£Œ"
    },
    {
      id: 4,
      title: "4. PC ë²„ì „ìœ¼ë¡œ ì „í™˜",
      desc: "ëª¨ë°”ì¼ ì•±ì—ëŠ” íƒˆí‡´ ë©”ë‰´ê°€ ì—†ìŠµë‹ˆë‹¤. ì•± ì„¤ì • ë©”ë‰´ í•˜ë‹¨ì˜ 'PC ë²„ì „ìœ¼ë¡œ ì´ë™' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.",
      cropClass: "crop-step-3", 
      actionLabel: "PC í™”ë©´ ì§„ì… ì™„ë£Œ"
    },
    {
      id: 5,
      title: "5. ìµœì¢… íƒˆí‡´ ìŠ¹ì¸",
      desc: "PC í™”ë©´ì˜ 'ë§ˆì´ì¿ íŒ¡ > íšŒì›ì •ë³´ ìˆ˜ì •' ë©”ë‰´ ë§¨ ì•„ë˜ì— ìˆëŠ” 'íšŒì› íƒˆí‡´' ë²„íŠ¼ì„ ì°¾ì•„ í´ë¦­í•˜ë©´ ì™„ë£Œë©ë‹ˆë‹¤.",
      cropClass: "crop-step-4", 
      actionLabel: "íƒˆí‡´ ì‹ ì²­ ì™„ë£Œ!"
    }
  ];

  /* 1. ì¸íŠ¸ë¡œ í™”ë©´ ì»´í¬ë„ŒíŠ¸ */
  function IntroScreen({ onStart }) {
    return (
      <div className="min-h-screen flex flex-col items-center justify-center p-6 bg-white max-w-2xl mx-auto text-center">
        <Icons.Shield />
        <h1 className="text-3xl font-bold text-gray-900 mb-2">ì¿ íŒ¡ ì™„ì „ íƒˆí‡´ ê°€ì´ë“œ</h1>
        <p className="text-gray-500 mb-8">ë‚´ ê°œì¸ì •ë³´ ì§€í‚¤ê¸°, 5ë‹¨ê³„ë¡œ ê¹”ë”í•˜ê²Œ ëë‚´ì„¸ìš”.</p>
        
        <div className="bg-red-50 border border-red-200 p-6 rounded-xl mb-10 shadow-sm max-w-lg w-full">
          <h3 className="text-red-600 font-bold mb-3">âš ï¸ ì•± ê°œë°œ ì·¨ì§€ ë° ì•ˆë‚´</h3>
          <p className="text-sm text-gray-700 leading-relaxed text-left">
            ìµœê·¼ <strong>ê³ ê° ì •ë³´ ìœ ì¶œ ì´ìŠˆ</strong>ë¡œ ì¸í•´ ê³„ì •ì„ ì‚­ì œí•˜ê³  ì‹¶ì§€ë§Œ, 
            ë³µì¡í•œ ì ˆì°¨ ë•Œë¬¸ì— ì–´ë ¤ì›€ì„ ê²ªëŠ” ë¶„ë“¤ì„ ìœ„í•´ ê°œë°œí–ˆìŠµë‹ˆë‹¤.<br/><br/>
            ì´ ì•±ì€ íƒˆí‡´ ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´í•´ë“œë¦¬ë©°, íŠ¹íˆ <strong>PC í™”ë©´ ë¶„í•  ëª¨ë“œ</strong>ë¥¼ 
            ì‚¬ìš©í•˜ì‹œë©´ ë”ìš± í¸ë¦¬í•˜ê²Œ ì§„í–‰í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </p>
        </div>

        <div className="w-full max-w-md space-y-4">
          <button 
            onClick={() => onStart('pc')}
            className="w-full p-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl shadow-lg transition-all font-bold text-lg flex justify-center items-center"
          >
            <span className="mr-2">ğŸ–¥ï¸</span> PCë¡œ íƒˆí‡´í•˜ê¸° (ì¶”ì²œ)
          </button>
          <button 
            onClick={() => onStart('mobile')}
            className="w-full p-4 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl border border-gray-300 transition-all font-bold text-lg flex justify-center items-center"
          >
             <span className="mr-2">ğŸ“±</span> ëª¨ë°”ì¼ë¡œ íƒˆí‡´í•˜ê¸°
          </button>
        </div>
      </div>
    );
  }

  /* 2. ê°€ì´ë“œ ì§„í–‰ í™”ë©´ ì»´í¬ë„ŒíŠ¸ */
  function GuideScreen({ mode, step, setStep, switchMode, onNext }) {
    /* PC ëª¨ë“œì¼ ë•Œ ì™¼ìª½ ì •ë ¬, ëª¨ë°”ì¼ì¼ ë•Œ ì¤‘ì•™ ì •ë ¬ */
    const containerClass = mode === 'pc' 
      ? 'max-w-md ml-4 md:ml-12 lg:ml-20 border-r border-gray-200 shadow-xl' 
      : 'max-w-md mx-auto shadow-lg';

    return (
      <div className={`min-h-screen flex flex-col bg-white transition-all duration-300 ${containerClass}`}>
        
        {/* ìƒë‹¨ íƒ­ ì„ íƒ ì˜ì—­ */}
        <div className="flex w-full sticky top-0 z-20 bg-white border-b border-gray-200">
          <button 
            onClick={() => switchMode('pc')}
            className={`flex-1 flex items-center justify-center p-3 text-sm font-bold ${mode === 'pc' ? 'text-white bg-blue-600' : 'text-gray-500 bg-gray-50'}`}
          >
            <Icons.Monitor isActive={mode === 'pc'} /> PC ëª¨ë“œ
          </button>
          <button 
            onClick={() => switchMode('mobile')}
            className={`flex-1 flex items-center justify-center p-3 text-sm font-bold ${mode === 'mobile' ? 'text-white bg-blue-600' : 'text-gray-500 bg-gray-50'}`}
          >
            <Icons.Mobile isActive={mode === 'mobile'} /> ëª¨ë°”ì¼ ëª¨ë“œ
          </button>
        </div>

        {/* ë‹¨ê³„ ë„¤ë¹„ê²Œì´ì…˜ (ìˆ«ì + í™”ì‚´í‘œ) */}
        <div className="bg-white border-b border-gray-100 sticky top-[48px] z-10 py-3">
          <div className="flex justify-center items-center px-2">
            {guideData.map((data, index) => (
              <React.Fragment key={data.id}>
                <button
                  onClick={() => setStep(index)}
                  className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs transition-all ${
                    index === step 
                      ? 'bg-blue-600 text-white shadow-md scale-110 ring-2 ring-blue-200' 
                      : 'bg-gray-100 text-gray-400 hover:bg-gray-200'
                  }`}
                >
                  {data.id}
                </button>
                {index < guideData.length - 1 && <Icons.Triangle />}
              </React.Fragment>
            ))}
          </div>
        </div>
        
        {/* PC ëª¨ë“œì¼ ë•Œë§Œ ë³´ì´ëŠ” íŒ */}
        {mode === 'pc' && step === 0 && (
          <div className="bg-blue-50 p-3 mx-4 mt-4 rounded-lg text-xs text-blue-800 border border-blue-200 leading-relaxed">
            ğŸ“Œ <strong>í™”ë©´ ë°°ì¹˜ íŒ:</strong><br/>
            ì¿ íŒ¡ ë¡œê·¸ì¸ ì°½ì´ <strong>ì˜¤ë¥¸ìª½ ë</strong>ì— ë–´ë‚˜ìš”?<br/>
            ì§€ê¸ˆ ë³´ê³  ê³„ì‹  ê°€ì´ë“œ ì°½ì€ <strong>ì™¼ìª½</strong>ì— ë‘ê³ , ë‘ ì°½ì„ ë™ì‹œì— ë³´ë©´ì„œ ì§„í–‰í•˜ì„¸ìš”.
          </div>
        )}

        {/* ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ */}
        <div className="flex-1 p-5 overflow-y-auto">
          <h2 className="text-xl font-bold mb-4 text-gray-900">{guideData[step].title}</h2>

          <div className="crop-container mb-5 shadow-inner">
             {/* [ì´ë¯¸ì§€ êµì²´ ë°©ë²•] src ì†ì„±ì— ì‹¤ì œ ì´ë¯¸ì§€ URLì„ ë„£ìœ¼ì„¸ìš”. */}
             <img 
               src="https://via.placeholder.com/400x1200/ddd/888?text=Long+Screenshot+Image" 
               alt="Step Guide" 
               className={`crop-image ${guideData[step].cropClass}`}
               style={{ height: '1200px' }} 
             />
          </div>

          <div className="bg-gray-50 p-4 rounded-xl border border-gray-200">
            <p className="text-gray-700 font-medium leading-relaxed">
              {guideData[step].desc}
            </p>
          </div>
        </div>

        {/* í•˜ë‹¨ ë‹¤ìŒ ë²„íŠ¼ */}
        <div className="p-4 bg-white border-t border-gray-200 sticky bottom-0 z-10">
          <button 
            onClick={onNext}
            className="w-full py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg flex items-center justify-center shadow-lg active:scale-95 transition-transform"
          >
            {guideData[step].actionLabel}
            <Icons.RightArrow />
          </button>
        </div>
      </div>
    );
  }

  /* 3. ì™„ë£Œ í™”ë©´ ì»´í¬ë„ŒíŠ¸ */
  function SuccessScreen() {
    return (
      <div className="min-h-screen flex flex-col items-center justify-center bg-green-50 p-6 text-center max-w-md mx-auto">
        <div className="bg-white p-5 rounded-full shadow-lg mb-6 animate-bounce">
          <svg className="w-16 h-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7"></path></svg>
        </div>
        <h2 className="text-2xl font-bold text-gray-900 mb-2">íƒˆí‡´ ì ˆì°¨ ì™„ë£Œ!</h2>
        <p className="text-gray-600 mb-8">ì´ì œ ìŠ¤ë§ˆíŠ¸í°ì—ì„œ ì•±ì„ ì‚­ì œí•˜ì‹œë©´ ë©ë‹ˆë‹¤.<br/>ê³ ìƒ ë§ìœ¼ì…¨ìŠµë‹ˆë‹¤.</p>
        <button 
          onClick={() => window.location.reload()} 
          className="text-gray-400 underline text-sm hover:text-gray-600"
        >
          ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </button>
      </div>
    );
  }

  /* ë©”ì¸ App ì»´í¬ë„ŒíŠ¸ */
  function App() {
    const [view, setView] = useState('intro'); // intro, guide, success
    const [mode, setMode] = useState('mobile'); // pc, mobile
    const [step, setStep] = useState(0);

    /* PC íŒì—… ì—´ê¸° (ì˜¤ë¥¸ìª½ ì •ë ¬ ë¡œì§) */
    const openCoupangPopup = () => {
      const popupWidth = 500;
      const popupHeight = window.screen.availHeight || 800;
      const leftPos = (window.screen.width || 1920) - popupWidth; // ì˜¤ë¥¸ìª½ ë ì¢Œí‘œ ê³„ì‚°
      
      const win = window.open(
        'https://login.coupang.com/login/login.pang', 
        'coupangLogin', 
        `width=${popupWidth},height=${popupHeight},left=${leftPos},top=0,resizable=yes,scrollbars=yes`
      );

      if (!win) {
        alert("íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ ìš°ì¸¡ ì•„ì´ì½˜ì„ ëˆŒëŸ¬ íŒì—…ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.");
      }
    };

    /* ì¸íŠ¸ë¡œ -> ê°€ì´ë“œ ì‹œì‘ */
    const startGuide = (selectedMode) => {
      setMode(selectedMode);
      setView('guide');
      setStep(0);
      
      if (selectedMode === 'pc') {
        setTimeout(openCoupangPopup, 500);
      }
    };

    /* íƒ­ì—ì„œ ëª¨ë“œ ì „í™˜ ì‹œ */
    const switchMode = (newMode) => {
      setMode(newMode);
      setStep(0);
      if (newMode === 'pc') {
        openCoupangPopup();
      }
    };

    /* ë‹¤ìŒ ë‹¨ê³„ ì´ë™ */
    const handleNext = () => {
      if (step < guideData.length - 1) {
        setStep(step + 1);
      } else {
        setView('success');
      }
    };

    /* í™”ë©´ ë Œë”ë§ */
    if (view === 'intro') return <IntroScreen onStart={startGuide} />;
    if (view === 'success') return <SuccessScreen />;
    
    return (
      <GuideScreen 
        mode={mode} 
        step={step} 
        setStep={setStep} 
        switchMode={switchMode} 
        onNext={handleNext} 
      />
    );
  }

  const root = ReactDOM.createRoot(document.getElementById('root'));
  root.render(<App />);
</script>

</body>
</html>
